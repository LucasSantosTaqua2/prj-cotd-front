<div class="gerenciamento-container">
    <h1>Gerenciar Corridas</h1>

    <div class="form-card">
        <h2>{{ isEditing ? 'Editar Corrida' : 'Adicionar Corrida' }}</h2>
        <form (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" [(ngModel)]="currentCorrida.nome" required>
            </div>
            <div class="form-group">
                <label for="data_corrida">Data:</label>
                <input type="date" id="data_corrida" name="data_corrida" [(ngModel)]="currentCorrida.data_corrida"
                    required>
            </div>
            <button type="submit">{{ isEditing ? 'Salvar Alterações' : 'Adicionar' }}</button>
            <button *ngIf="isEditing" type="button" class="cancel-button" (click)="cancelEdit()">Cancelar</button>
        </form>
    </div>

    <div class="corridas-list-admin">
        <h2>Corridas Existentes</h2>
        <div class="list-header">
            <span>Nome</span>
            <span>Data</span>
            <span>Status</span>
            <span>Ações</span>
        </div>
        <div *ngFor="let corrida of corridas" class="corrida-item">
            <span>{{ corrida.nome }}</span>
            <span>{{ corrida.data_corrida | date: 'mediumDate' }}</span>
            <span [ngClass]="{'status-aberta': !corrida.votacao_fechada, 'status-fechada': corrida.votacao_fechada}">
                {{ corrida.votacao_fechada ? 'Fechada' : 'Aberta' }}
            </span>
            <div class="actions">
                <button (click)="onEdit(corrida)" class="edit-button">Editar</button>
                <button *ngIf="!corrida.votacao_fechada" (click)="onFecharVotacao(corrida.id)"
                    class="close-button">Fechar Votação</button>
                <button (click)="onDelete(corrida.id)" class="delete-button">Excluir</button>
            </div>
        </div>
    </div>
</div>